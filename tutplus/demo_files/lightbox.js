var Lightbox;!function(e){Lightbox={auto_modal:!1,overlayOpacity:.8,overlayColor:"000",disableCloseClick:!0,resizeSequence:0,resizeSpeed:"normal",fadeInSpeed:"normal",slideDownSpeed:"slow",minWidth:240,borderSize:10,boxColor:"fff",fontColor:"000",topPosition:"",infoHeight:20,alternative_layout:!1,imageArray:[],imageNum:null,total:0,activeImage:null,inprogress:!1,disableResize:!1,disableZoom:!1,isZoomedIn:!1,rtl:!1,loopItems:!1,keysClose:["c","x",27],keysPrevious:["p",37],keysNext:["n",39],keysZoom:["z"],keysPlayPause:[32],slideInterval:5e3,showPlayPause:!0,autoStart:!0,autoExit:!0,pauseOnNextClick:!1,pauseOnPrevClick:!0,slideIdArray:[],slideIdCount:0,isSlideshow:!1,isPaused:!1,loopSlides:!1,isLightframe:!1,iframe_width:600,iframe_height:400,iframe_border:1,enableVideo:!1,flvPlayer:"/flvplayer.swf",flvFlashvars:"",isModal:!1,isVideo:!1,videoId:!1,modalWidth:400,modalHeight:400,modalHTML:null,initialize:function(){var i=Drupal.settings.lightbox2;Lightbox.overlayOpacity=i.overlay_opacity,Lightbox.overlayColor=i.overlay_color,Lightbox.disableCloseClick=i.disable_close_click,Lightbox.resizeSequence=i.resize_sequence,Lightbox.resizeSpeed=i.resize_speed,Lightbox.fadeInSpeed=i.fade_in_speed,Lightbox.slideDownSpeed=i.slide_down_speed,Lightbox.borderSize=i.border_size,Lightbox.boxColor=i.box_color,Lightbox.fontColor=i.font_color,Lightbox.topPosition=i.top_position,Lightbox.rtl=i.rtl,Lightbox.loopItems=i.loop_items,Lightbox.keysClose=i.keys_close.split(" "),Lightbox.keysPrevious=i.keys_previous.split(" "),Lightbox.keysNext=i.keys_next.split(" "),Lightbox.keysZoom=i.keys_zoom.split(" "),Lightbox.keysPlayPause=i.keys_play_pause.split(" "),Lightbox.disableResize=i.disable_resize,Lightbox.disableZoom=i.disable_zoom,Lightbox.slideInterval=i.slideshow_interval,Lightbox.showPlayPause=i.show_play_pause,Lightbox.showCaption=i.show_caption,Lightbox.autoStart=i.slideshow_automatic_start,Lightbox.autoExit=i.slideshow_automatic_exit,Lightbox.pauseOnNextClick=i.pause_on_next_click,Lightbox.pauseOnPrevClick=i.pause_on_previous_click,Lightbox.loopSlides=i.loop_slides,Lightbox.alternative_layout=i.use_alt_layout,Lightbox.iframe_width=i.iframe_width,Lightbox.iframe_height=i.iframe_height,Lightbox.iframe_border=i.iframe_border,Lightbox.enableVideo=i.enable_video,i.enable_video&&(Lightbox.flvPlayer=i.flvPlayer,Lightbox.flvFlashvars=i.flvFlashvars);var t=i.use_alt_layout?"lightbox2-alt-layout":"lightbox2-orig-layout",o='<div id="lightbox2-overlay" style="display: none;"></div>      <div id="lightbox" style="display: none;" class="'+t+'">        <div id="outerImageContainer"></div>        <div id="imageDataContainer" class="clearfix">          <div id="imageData"></div>        </div>      </div>',a='<div id="loading"><a href="#" id="loadingLink"></a></div>',h='<div id="modalContainer" style="display: none;"></div>',l='<div id="frameContainer" style="display: none;"></div>',r='<div id="imageContainer" style="display: none;"></div>',g='<div id="imageDetails"></div>',s='<div id="bottomNav"></div>',n='<img id="lightboxImage" alt="" />',d='<div id="hoverNav"><a id="prevLink" href="#"></a><a id="nextLink" href="#"></a></div>',b='<div id="frameHoverNav"><a id="framePrevLink" href="#"></a><a id="frameNextLink" href="#"></a></div>',d='<div id="hoverNav"><a id="prevLink" title="'+Drupal.t("Previous")+'" href="#"></a><a id="nextLink" title="'+Drupal.t("Next")+'" href="#"></a></div>',b='<div id="frameHoverNav"><a id="framePrevLink" title="'+Drupal.t("Previous")+'" href="#"></a><a id="frameNextLink" title="'+Drupal.t("Next")+'" href="#"></a></div>',x='<span id="caption"></span>',c='<span id="numberDisplay"></span>',m='<a id="bottomNavClose" title="'+Drupal.t("Close")+'" href="#"></a>',L='<a id="bottomNavZoom" href="#"></a>',u='<a id="bottomNavZoomOut" href="#"></a>',f='<a id="lightshowPause" title="'+Drupal.t("Pause Slideshow")+'" href="#" style="display: none;"></a>',v='<a id="lightshowPlay" title="'+Drupal.t("Play Slideshow")+'" href="#" style="display: none;"></a>';e("body").append(o),e("#outerImageContainer").append(h+l+r+a),i.use_alt_layout?(e("#outerImageContainer").append(s),e("#imageContainer").append(n),e("#bottomNav").append(m+L+u),e("#imageData").append(d+g),e("#imageDetails").append(x+c+f+v)):(e("#imageContainer").append(n+d),e("#imageData").append(g+s),e("#imageDetails").append(x+c),e("#bottomNav").append(b+m+L+u+f+v)),Lightbox.disableCloseClick&&e("#lightbox2-overlay").click(function(){return Lightbox.end(),!1}).hide(),e("#loadingLink, #bottomNavClose").click(function(){return Lightbox.end("forceClose"),!1}),e("#prevLink, #framePrevLink").click(function(){return Lightbox.changeData(Lightbox.activeImage-1),!1}),e("#nextLink, #frameNextLink").click(function(){return Lightbox.changeData(Lightbox.activeImage+1),!1}),e("#bottomNavZoom").click(function(){return Lightbox.changeData(Lightbox.activeImage,!0),!1}),e("#bottomNavZoomOut").click(function(){return Lightbox.changeData(Lightbox.activeImage,!1),!1}),e("#lightshowPause").click(function(){return Lightbox.togglePlayPause("lightshowPause","lightshowPlay"),!1}),e("#lightshowPlay").click(function(){return Lightbox.togglePlayPause("lightshowPlay","lightshowPause"),!1}),e("#prevLink, #nextLink, #framePrevLink, #frameNextLink").css({paddingTop:Lightbox.borderSize+"px"}),e("#imageContainer, #frameContainer, #modalContainer").css({padding:Lightbox.borderSize+"px"}),e("#outerImageContainer, #imageDataContainer, #bottomNavClose").css({backgroundColor:"#"+Lightbox.boxColor,color:"#"+Lightbox.fontColor}),Lightbox.alternative_layout?e("#bottomNavZoom, #bottomNavZoomOut").css({bottom:Lightbox.borderSize+"px",right:Lightbox.borderSize+"px"}):1==Lightbox.rtl&&e.browser.msie&&e("#bottomNavZoom, #bottomNavZoomOut").css({left:"0px"}),i.force_show_nav&&e("#prevLink, #nextLink").addClass("force_show_nav")},initList:function(i){(void 0==i||null==i)&&(i=document),e("a[rel^='lightbox']:not(.lightbox-processed), area[rel^='lightbox']:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return Lightbox.disableCloseClick&&(e("#lightbox").unbind("click"),e("#lightbox").click(function(){Lightbox.end("forceClose")})),Lightbox.start(this,!1,!1,!1,!1),i.preventDefault&&i.preventDefault(),!1}),e("a[rel^='lightshow']:not(.lightbox-processed), area[rel^='lightshow']:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return Lightbox.disableCloseClick&&(e("#lightbox").unbind("click"),e("#lightbox").click(function(){Lightbox.end("forceClose")})),Lightbox.start(this,!0,!1,!1,!1),i.preventDefault&&i.preventDefault(),!1}),e("a[rel^='lightframe']:not(.lightbox-processed), area[rel^='lightframe']:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return Lightbox.disableCloseClick&&(e("#lightbox").unbind("click"),e("#lightbox").click(function(){Lightbox.end("forceClose")})),Lightbox.start(this,!1,!0,!1,!1),i.preventDefault&&i.preventDefault(),!1}),Lightbox.enableVideo&&e("a[rel^='lightvideo']:not(.lightbox-processed), area[rel^='lightvideo']:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return Lightbox.disableCloseClick&&(e("#lightbox").unbind("click"),e("#lightbox").click(function(){Lightbox.end("forceClose")})),Lightbox.start(this,!1,!1,!0,!1),i.preventDefault&&i.preventDefault(),!1}),e("a[rel^='lightmodal']:not(.lightbox-processed), area[rel^='lightmodal']:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return e("#lightbox").unbind("click"),e("#lightbox").addClass(e(this).attr("class")),e("#lightbox").removeClass("lightbox-processed"),Lightbox.start(this,!1,!1,!1,!0),i.preventDefault&&i.preventDefault(),!1}),e("#lightboxAutoModal:not(.lightbox-processed)",i).addClass("lightbox-processed").click(function(i){return Lightbox.auto_modal=!0,e("#lightbox").unbind("click"),Lightbox.start(this,!1,!1,!1,!0),i.preventDefault&&i.preventDefault(),!1})},start:function(i,t,o,a,h){Lightbox.isPaused=!Lightbox.autoStart,Lightbox.toggleSelectsFlash("hide");var l=Lightbox.getPageSize();e("#lightbox2-overlay").hide().css({width:"100%",zIndex:"10090",height:l[1]+"px",backgroundColor:"#"+Lightbox.overlayColor}),a&&this.detectMacFF2()?(e("#lightbox2-overlay").removeClass("overlay_default"),e("#lightbox2-overlay").addClass("overlay_macff2"),e("#lightbox2-overlay").css({opacity:null})):(e("#lightbox2-overlay").removeClass("overlay_macff2"),e("#lightbox2-overlay").addClass("overlay_default"),e("#lightbox2-overlay").css({opacity:Lightbox.overlayOpacity})),e("#lightbox2-overlay").fadeIn(Lightbox.fadeInSpeed),Lightbox.isSlideshow=t,Lightbox.isLightframe=o,Lightbox.isVideo=a,Lightbox.isModal=h,Lightbox.imageArray=[],Lightbox.imageNum=0;var r=e(i.tagName),g=null,s=Lightbox.parseRel(i),n=s.rel,d=s.group,b=s.title?s.title:i.title,x=null,c=0;s.flashvars&&(Lightbox.flvFlashvars=Lightbox.flvFlashvars+"&"+s.flashvars);var m=i.title;if(!m){var L=e(i).find("img");m=L&&e(L).attr("alt")?e(L).attr("alt"):b}if("lightboxAutoModal"==e(i).attr("id"))x=s.style,Lightbox.imageArray.push(["#lightboxAutoModal > *",b,m,x,1]);else if("lightbox"!=n&&"lightshow"!=n||d)if(d){for(c=0;c<r.length;c++)if(g=r[c],g.href&&"string"==typeof g.href&&e(g).attr("rel")){var u=Lightbox.parseRel(g),f=u.title?u.title:g.title;if(img_alt=g.title,!img_alt){var v=e(g).find("img");img_alt=v&&e(v).attr("alt")?e(v).attr("alt"):b}u.rel==n&&u.group==d&&((Lightbox.isLightframe||Lightbox.isModal||Lightbox.isVideo)&&(x=u.style),Lightbox.imageArray.push([g.href,f,img_alt,x]))}for(c=0;c<Lightbox.imageArray.length;c++)for(j=Lightbox.imageArray.length-1;j>c;j--)Lightbox.imageArray[c][0]==Lightbox.imageArray[j][0]&&Lightbox.imageArray.splice(j,1);for(;Lightbox.imageArray[Lightbox.imageNum][0]!=i.href;)Lightbox.imageNum++}else x=s.style,Lightbox.imageArray.push([i.href,b,m,x]);else Lightbox.imageArray.push([i.href,b,m]);Lightbox.isSlideshow&&Lightbox.showPlayPause&&Lightbox.isPaused&&(e("#lightshowPlay").show(),e("#lightshowPause").hide());var p=Lightbox.getPageScroll(),y=p[1]+1*(""==Lightbox.topPosition?l[3]/10:Lightbox.topPosition),w=p[0];e("#frameContainer, #modalContainer, #lightboxImage").hide(),e("#hoverNav, #prevLink, #nextLink, #frameHoverNav, #framePrevLink, #frameNextLink").hide(),e("#imageDataContainer, #numberDisplay, #bottomNavZoom, #bottomNavZoomOut").hide(),e("#outerImageContainer").css({width:"250px",height:"250px"}),e("#lightbox").css({zIndex:"10500",top:y+"px",left:w+"px"}).show(),Lightbox.total=Lightbox.imageArray.length,Lightbox.changeData(Lightbox.imageNum)},changeData:function(i,t){if(Lightbox.inprogress===!1){if(Lightbox.total>1&&(Lightbox.isSlideshow&&Lightbox.loopSlides||!Lightbox.isSlideshow&&Lightbox.loopItems)&&(i>=Lightbox.total&&(i=0),0>i&&(i=Lightbox.total-1)),Lightbox.isSlideshow)for(var o=0;o<Lightbox.slideIdCount;o++)window.clearTimeout(Lightbox.slideIdArray[o]);if(Lightbox.inprogress=!0,Lightbox.activeImage=i,Lightbox.disableResize&&!Lightbox.isSlideshow&&(t=!0),Lightbox.isZoomedIn=t,e("#loading").css({zIndex:"10500"}).show(),Lightbox.alternative_layout||e("#imageContainer").hide(),e("#frameContainer, #modalContainer, #lightboxImage").hide(),e("#hoverNav, #prevLink, #nextLink, #frameHoverNav, #framePrevLink, #frameNextLink").hide(),e("#imageDataContainer, #numberDisplay, #bottomNavZoom, #bottomNavZoomOut").hide(),Lightbox.isLightframe||Lightbox.isVideo||Lightbox.isModal){if(Lightbox.isLightframe){e("#lightbox #imageDataContainer").addClass("lightbox2-alt-layout-data");var a=Lightbox.imageArray[Lightbox.activeImage][0];e("#frameContainer").html('<iframe id="lightboxFrame" style="display: none;" src="'+a+'"></iframe>'),e.browser.mozilla&&-1!=a.indexOf(".swf")&&setTimeout(function(){document.getElementById("lightboxFrame").src=Lightbox.imageArray[Lightbox.activeImage][0]},1e3),Lightbox.iframe_border||(e("#lightboxFrame").css({border:"none"}),e("#lightboxFrame").attr("frameborder","0"));var h=document.getElementById("lightboxFrame"),l=Lightbox.imageArray[Lightbox.activeImage][3];h=Lightbox.setStyles(h,l),Lightbox.resizeContainer(parseInt(h.width,10),parseInt(h.height,10))}else if(Lightbox.isVideo||Lightbox.isModal){e("#lightbox #imageDataContainer").addClass("lightbox2-alt-layout-data");var r=document.getElementById("modalContainer"),g=Lightbox.imageArray[Lightbox.activeImage][3];r=Lightbox.setStyles(r,g),Lightbox.isVideo&&(Lightbox.modalHeight=parseInt(r.height,10)-10,Lightbox.modalWidth=parseInt(r.width,10)-10,Lightvideo.startVideo(Lightbox.imageArray[Lightbox.activeImage][0])),Lightbox.resizeContainer(parseInt(r.width,10),parseInt(r.height,10))}}else e("#lightbox #imageDataContainer").removeClass("lightbox2-alt-layout-data"),imgPreloader=new Image,imgPreloader.onerror=function(){Lightbox.imgNodeLoadingError(this)},imgPreloader.onload=function(){var i=document.getElementById("lightboxImage");i.src=Lightbox.imageArray[Lightbox.activeImage][0],i.alt=Lightbox.imageArray[Lightbox.activeImage][2];var o=imgPreloader.width,a=imgPreloader.height,h=Lightbox.getPageSize(),l={w:h[2]-2*Lightbox.borderSize,h:h[3]-6*Lightbox.borderSize-4*Lightbox.infoHeight-h[3]/10},r={w:imgPreloader.width,h:imgPreloader.height};if(t!==!0){var g=1;e("#bottomNavZoomOut, #bottomNavZoom").hide(),(r.w>=l.w||r.h>=l.h)&&r.h&&r.w&&(g=l.w/r.w<l.h/r.h?l.w/r.w:l.h/r.h,Lightbox.disableZoom||Lightbox.isSlideshow||e("#bottomNavZoom").css({zIndex:"10500"}).show()),o=Math.floor(r.w*g),a=Math.floor(r.h*g)}else e("#bottomNavZoom").hide(),(r.w>=l.w||r.h>=l.h)&&r.h&&r.w&&(Lightbox.disableResize||Lightbox.isSlideshow!==!1||Lightbox.disableZoom||e("#bottomNavZoomOut").css({zIndex:"10500"}).show());i.style.width=o+"px",i.style.height=a+"px",Lightbox.resizeContainer(o,a),imgPreloader.onload=function(){}},imgPreloader.src=Lightbox.imageArray[Lightbox.activeImage][0],imgPreloader.alt=Lightbox.imageArray[Lightbox.activeImage][2]}},imgNodeLoadingError:function(e){var i=Drupal.settings.lightbox2,t=Lightbox.imageArray[Lightbox.activeImage][0];""!==i.display_image_size&&(t=t.replace(new RegExp("."+i.display_image_size),"")),Lightbox.imageArray[Lightbox.activeImage][0]=t,e.onerror=function(){Lightbox.imgLoadingError(e)},e.src=t},imgLoadingError:function(e){var i=Drupal.settings.lightbox2;Lightbox.imageArray[Lightbox.activeImage][0]=i.default_image,e.src=i.default_image},resizeContainer:function(i,t){i=i<Lightbox.minWidth?Lightbox.minWidth:i,this.widthCurrent=e("#outerImageContainer").width(),this.heightCurrent=e("#outerImageContainer").height();var o=i+2*Lightbox.borderSize,a=t+2*Lightbox.borderSize;if(this.xScale=o/this.widthCurrent*100,this.yScale=a/this.heightCurrent*100,wDiff=this.widthCurrent-o,hDiff=this.heightCurrent-a,e("#modalContainer").css({width:i,height:t}),Lightbox.resizeSequence){var h={width:o},l={height:a};2==Lightbox.resizeSequence&&(h={height:a},l={width:o}),e("#outerImageContainer").animate(h,Lightbox.resizeSpeed).animate(l,Lightbox.resizeSpeed,"linear",function(){Lightbox.showData()})}else e("#outerImageContainer").animate({width:o,height:a},Lightbox.resizeSpeed,"linear",function(){Lightbox.showData()});0===hDiff&&0===wDiff&&Lightbox.pause(e.browser.msie?250:100);var r=Drupal.settings.lightbox2;r.use_alt_layout||e("#prevLink, #nextLink").css({height:t+"px"}),e("#imageDataContainer").css({width:o+"px"})},showData:function(){if(e("#loading").hide(),Lightbox.isLightframe||Lightbox.isVideo||Lightbox.isModal)if(Lightbox.updateDetails(),Lightbox.isLightframe)e("#frameContainer").show(),e.browser.safari||0===Lightbox.fadeInSpeed?e("#lightboxFrame").css({zIndex:"10500"}).show():e("#lightboxFrame").css({zIndex:"10500"}).fadeIn(Lightbox.fadeInSpeed);else if(Lightbox.isVideo)e("#modalContainer").html(Lightbox.modalHTML).click(function(){return!1}).css("zIndex","10500").show();else{var i=unescape(Lightbox.imageArray[Lightbox.activeImage][0]);Lightbox.imageArray[Lightbox.activeImage][4]?(e(i).appendTo("#modalContainer"),e("#modalContainer").css({zIndex:"10500"}).show()):e("#modalContainer").hide().load(i,function(){e("#modalContainer").css({zIndex:"10500"}).show()}),e("#modalContainer").unbind("click")}else e("#imageContainer").show(),e.browser.safari||0===Lightbox.fadeInSpeed?e("#lightboxImage").css({zIndex:"10500"}).show():e("#lightboxImage").css({zIndex:"10500"}).fadeIn(Lightbox.fadeInSpeed),Lightbox.updateDetails(),this.preloadNeighborImages();Lightbox.inprogress=!1,Lightbox.isSlideshow&&(Lightbox.loopSlides||Lightbox.activeImage!=Lightbox.total-1?!Lightbox.isPaused&&Lightbox.total>1&&(Lightbox.slideIdArray[Lightbox.slideIdCount++]=setTimeout(function(){Lightbox.changeData(Lightbox.activeImage+1)},Lightbox.slideInterval)):Lightbox.autoExit&&(Lightbox.slideIdArray[Lightbox.slideIdCount++]=setTimeout(function(){Lightbox.end("slideshow")},Lightbox.slideInterval)),Lightbox.showPlayPause&&Lightbox.total>1&&!Lightbox.isPaused?(e("#lightshowPause").show(),e("#lightshowPlay").hide()):Lightbox.showPlayPause&&Lightbox.total>1&&(e("#lightshowPause").hide(),e("#lightshowPlay").show()));var t=Lightbox.getPageSize(),o=Lightbox.getPageScroll(),a=t[1];if(Lightbox.isZoomedIn&&t[1]>t[3]){var h=1*(""==Lightbox.topPosition?t[3]/10:Lightbox.topPosition);a=a+o[1]+h}e("#lightbox2-overlay").css({height:a+"px",width:t[0]+"px"}),e.browser.mozilla&&-1!=Lightbox.imageArray[Lightbox.activeImage][0].indexOf(".pdf")&&setTimeout(function(){document.getElementById("lightboxFrame").src=Lightbox.imageArray[Lightbox.activeImage][0]},1e3)},updateDetails:function(){e("#imageDataContainer").hide();var i=Drupal.settings.lightbox2;if(i.show_caption){var t=Lightbox.filterXSS(Lightbox.imageArray[Lightbox.activeImage][1]);t||(t=""),e("#caption").html(t).css({zIndex:"10500"}).show()}var o=null;if(i.image_count&&Lightbox.total>1){var a=Lightbox.activeImage+1;o=Lightbox.isLightframe||Lightbox.isModal||Lightbox.isVideo?Lightbox.isVideo?i.video_count.replace(/\!current/,a).replace(/\!total/,Lightbox.total):i.page_count.replace(/\!current/,a).replace(/\!total/,Lightbox.total):i.image_count.replace(/\!current/,a).replace(/\!total/,Lightbox.total),e("#numberDisplay").html(o).css({zIndex:"10500"}).show()}else e("#numberDisplay").hide();e("#imageDataContainer").hide().slideDown(Lightbox.slideDownSpeed,function(){e("#bottomNav").show()}),1==Lightbox.rtl&&e("#bottomNav").css({"float":"left"}),Lightbox.updateNav()},updateNav:function(){e("#hoverNav").css({zIndex:"10500"}).show();var i="#prevLink",t="#nextLink";Lightbox.isSlideshow?(Lightbox.total>1&&Lightbox.loopSlides||0!==Lightbox.activeImage?e(i).css({zIndex:"10500"}).show().click(function(){return Lightbox.pauseOnPrevClick&&Lightbox.togglePlayPause("lightshowPause","lightshowPlay"),Lightbox.changeData(Lightbox.activeImage-1),!1}):e(i).hide(),Lightbox.total>1&&Lightbox.loopSlides||Lightbox.activeImage!=Lightbox.total-1?e(t).css({zIndex:"10500"}).show().click(function(){return Lightbox.pauseOnNextClick&&Lightbox.togglePlayPause("lightshowPause","lightshowPlay"),Lightbox.changeData(Lightbox.activeImage+1),!1}):e(t).hide()):((Lightbox.isLightframe||Lightbox.isModal||Lightbox.isVideo)&&!Lightbox.alternative_layout&&(e("#frameHoverNav").css({zIndex:"10500"}).show(),e("#hoverNav").css({zIndex:"10500"}).hide(),i="#framePrevLink",t="#frameNextLink"),Lightbox.total>1&&Lightbox.loopItems||0!==Lightbox.activeImage?e(i).css({zIndex:"10500"}).show().unbind().click(function(){return Lightbox.changeData(Lightbox.activeImage-1),!1}):e(i).hide(),Lightbox.total>1&&Lightbox.loopItems||Lightbox.activeImage!=Lightbox.total-1?e(t).css({zIndex:"10500"}).show().unbind().click(function(){return Lightbox.changeData(Lightbox.activeImage+1),!1}):e(t).hide()),Lightbox.isModal||this.enableKeyboardNav()},enableKeyboardNav:function(){e(document).bind("keydown",this.keyboardAction)},disableKeyboardNav:function(){e(document).unbind("keydown",this.keyboardAction)},keyboardAction:function(e){if(null===e?(keycode=event.keyCode,escapeKey=27):(keycode=e.keyCode,escapeKey=e.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),Lightbox.checkKey(Lightbox.keysClose,key,keycode))Lightbox.end("forceClose");else if(Lightbox.checkKey(Lightbox.keysPrevious,key,keycode))(Lightbox.total>1&&(Lightbox.isSlideshow&&Lightbox.loopSlides||!Lightbox.isSlideshow&&Lightbox.loopItems)||0!==Lightbox.activeImage)&&Lightbox.changeData(Lightbox.activeImage-1);else if(Lightbox.checkKey(Lightbox.keysNext,key,keycode))(Lightbox.total>1&&(Lightbox.isSlideshow&&Lightbox.loopSlides||!Lightbox.isSlideshow&&Lightbox.loopItems)||Lightbox.activeImage!=Lightbox.total-1)&&Lightbox.changeData(Lightbox.activeImage+1);else{if(!(!Lightbox.checkKey(Lightbox.keysZoom,key,keycode)||Lightbox.disableResize||Lightbox.disableZoom||Lightbox.isSlideshow||Lightbox.isLightframe))return Lightbox.isZoomedIn?Lightbox.changeData(Lightbox.activeImage,!1):Lightbox.isZoomedIn||Lightbox.changeData(Lightbox.activeImage,!0),!1;if(Lightbox.checkKey(Lightbox.keysPlayPause,key,keycode)&&Lightbox.isSlideshow)return Lightbox.isPaused?Lightbox.togglePlayPause("lightshowPlay","lightshowPause"):Lightbox.togglePlayPause("lightshowPause","lightshowPlay"),!1}},preloadNeighborImages:function(){Lightbox.total-1>Lightbox.activeImage&&(preloadNextImage=new Image,preloadNextImage.src=Lightbox.imageArray[Lightbox.activeImage+1][0]),Lightbox.activeImage>0&&(preloadPrevImage=new Image,preloadPrevImage.src=Lightbox.imageArray[Lightbox.activeImage-1][0])},end:function(i){var t="slideshow"==i?!1:!0;if(!(Lightbox.isSlideshow&&Lightbox.isPaused&&!t||Lightbox.inprogress===!0&&"forceClose"!=i))if(Lightbox.disableKeyboardNav(),e("#lightbox").hide(),e("#lightbox2-overlay").fadeOut(),Lightbox.isPaused=!0,Lightbox.inprogress=!1,Lightbox.toggleSelectsFlash("visible"),Lightbox.isSlideshow){for(var o=0;o<Lightbox.slideIdCount;o++)window.clearTimeout(Lightbox.slideIdArray[o]);e("#lightshowPause, #lightshowPlay").hide()}else Lightbox.isLightframe?e("#frameContainer").empty().hide():(Lightbox.isVideo||Lightbox.isModal)&&(Lightbox.auto_modal||e("#modalContainer").hide().html(""),Lightbox.auto_modal=!1)},getPageScroll:function(){var e,i;return self.pageYOffset||self.pageXOffset?(i=self.pageYOffset,e=self.pageXOffset):document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)?(i=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(i=document.body.scrollTop,e=document.body.scrollLeft),arrayPageScroll=[e,i],arrayPageScroll},getPageSize:function(){var e,i;window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,i=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,i=document.body.scrollHeight):(e=document.body.offsetWidth,i=document.body.offsetHeight);var t,o;return self.innerHeight?(t=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,o=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(t=document.documentElement.clientWidth,o=document.documentElement.clientHeight):document.body&&(t=document.body.clientWidth,o=document.body.clientHeight),pageHeight=o>i?o:i,pageWidth=t>e?e:t,arrayPageSize=new Array(pageWidth,pageHeight,t,o),arrayPageSize},pause:function(e){var i=new Date,t=null;do t=new Date;while(e>t-i)},toggleSelectsFlash:function(i){"visible"==i?e("select.lightbox_hidden, embed.lightbox_hidden, object.lightbox_hidden").show():"hide"==i&&(e("select:visible, embed:visible, object:visible").not("#lightboxAutoModal select, #lightboxAutoModal embed, #lightboxAutoModal object").addClass("lightbox_hidden"),e("select.lightbox_hidden, embed.lightbox_hidden, object.lightbox_hidden").hide())},parseRel:function(i){var t=[];if(t.rel=t.title=t.group=t.style=t.flashvars=null,!e(i).attr("rel"))return t;if(t.rel=e(i).attr("rel").match(/\w+/)[0],e(i).attr("rel").match(/\[(.*)\]/)){var o=e(i).attr("rel").match(/\[(.*?)\]/)[1].split("|");t.group=o[0],t.style=o[1],void 0!=t.style&&t.style.match(/flashvars:\s?(.*?);/)&&(t.flashvars=t.style.match(/flashvars:\s?(.*?);/)[1])}return e(i).attr("rel").match(/\[.*\]\[(.*)\]/)&&(t.title=e(i).attr("rel").match(/\[.*\]\[(.*)\]/)[1]),t},setStyles:function(e,i){if(e.width=Lightbox.iframe_width,e.height=Lightbox.iframe_height,e.scrolling="auto",!i)return e;for(var t=i.split(";"),o=0;o<t.length;o++)if(t[o].indexOf("width:")>=0){var a=t[o].replace("width:","");e.width=jQuery.trim(a)}else if(t[o].indexOf("height:")>=0){var h=t[o].replace("height:","");e.height=jQuery.trim(h)}else if(t[o].indexOf("scrolling:")>=0){var l=t[o].replace("scrolling:","");e.scrolling=jQuery.trim(l)}else if(t[o].indexOf("overflow:")>=0){var r=t[o].replace("overflow:","");e.overflow=jQuery.trim(r)}return e},togglePlayPause:function(i,t){if(Lightbox.isSlideshow&&"lightshowPause"==i)for(var o=0;o<Lightbox.slideIdCount;o++)window.clearTimeout(Lightbox.slideIdArray[o]);e("#"+i).hide(),e("#"+t).show(),"lightshowPlay"==i?(Lightbox.isPaused=!1,Lightbox.loopSlides||Lightbox.activeImage!=Lightbox.total-1?Lightbox.total>1&&Lightbox.changeData(Lightbox.activeImage+1):Lightbox.end()):Lightbox.isPaused=!0},triggerLightbox:function(i,t){i.length&&(t&&t.length?e("a[rel^='"+i+"["+t+"]'], area[rel^='"+i+"["+t+"]']").eq(0).trigger("click"):e("a[rel^='"+i+"'], area[rel^='"+i+"']").eq(0).trigger("click"))},detectMacFF2:function(){var e=navigator.userAgent.toLowerCase();if(/firefox[\/\s](\d+\.\d+)/.test(e)){var i=new Number(RegExp.$1);if(3>i&&-1!=e.indexOf("mac"))return!0}return!1},checkKey:function(e,i,t){return-1!=jQuery.inArray(i,e)||-1!=jQuery.inArray(String(t),e)},filterXSS:function(i,t){var o="";return e.ajax({url:Drupal.settings.basePath+"system/lightbox2/filter-xss",data:{string:i,allowed_tags:t},type:"POST",async:!1,dataType:"json",success:function(e){o=e}}),o}},Drupal.behaviors.initLightbox={attach:function(i){e("body:not(.lightbox-processed)",i).addClass("lightbox-processed").each(function(){return Lightbox.initialize(),!1}),Lightbox.initList(i),e("#lightboxAutoModal",i).triggerHandler("click")}}}(jQuery);
